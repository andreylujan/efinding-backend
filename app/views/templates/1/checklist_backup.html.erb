<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<title>Checklist</title>
	<style>
		body {
			font-family: 'Helvetica';
			font-size: 14px;
			color: #3F5B71;
		}
		html {
			text-align: center;
			width: 100%;
		}
		body {
			display: inline-block;
			margin: 0px auto;
			text-align: left;
			width: 90%;
		}
		h3 {
			margin-left: 20px;
			margin-right: 20px;
		}
		h2 {
			color: #f19122;
			margin-left: 20px;
			margin-right: 20px;
		}
		h4 {
			color: #3F5B71;
			margin-left: 20px;
			margin-right: 20px;
		}
		.field {
			/*margin-left: 20px;*/
			margin: 10px 0;
			width: 100%
		}
		.formHeaders {
			display: inline-block;
			vertical-align: top;
			margin-left: 10px;
			width: 100%;
		}
		.formHeader {
			display: inline-block;
			vertical-align: top;
			margin-left: 10px;
			width: 45%
		}
		.label {
			display: inline-block;
			font-weight: bold;
			/*text-align: justify;*/
			vertical-align: middle;
		}
		.labelChecklist {
			display: inline-block;
			font-weight: bold;
			margin-left: 10px;
			max-width: 86%;
			margin-top: 2px;
			/*text-align: justify;*/
		}
		.suggestion {
			display: block;
			margin-left: 60px;
			margin-top: 5px;
			color: gray;
			text-align: justify;
			text-justify: inter-word;
		}
		.value {
			/*color: #4078c0;*/
			display: inline-block;
			text-align: justify;
			vertical-align: middle;
		}
		.value.icon {
			display: inline-block;
			max-width: 100%;
			max-height : 100%;
		}
		.value.images {
			display: block;
		}
		.check {
			width: 17px;
		}
		.checklist {
			display: inline-block;
			margin-bottom: 15px;
			margin-top: 10px;
			vertical-align: top;
			width: 99%;
		}
		.maps {
			margin-left: 20px;
			margin-bottom: 20px;
			display: inline-block;
		}
		.pictures {
			width: 100%;
			/*display: block;*/
			/*margin-bottom: 15px;*/
			margin: 10px auto;
			/*margin-left: 20px;*/
		}
		.picture {
			display: inline-block;
			margin: 0 .5%;
			vertical-align: top;
			width: 23.3%;
			/*border: 1px  blue solid;*/
		}
		.pictureComment {
			max-width: 250px;
			color: gray;
			text-align: justify;
			text-justify: inter-word;
		}
		.general-comments {
			margin-left: 15px;
			text-align: justify;
		}
		.wpi-60 {
			width: 60px;
		}
		.wpi-80 {
			width: 80px;
		}
		.wpi-100 {
			width: 100px;
		}
		.wpi-120 {
			width: 120px;
		}
		.wpi-140 {
			width: 140px;
		}
		.wpi-160 {
			width: 160px;
		}
		.wpi-180 {
			width: 180px;
		}
		.wpi-500 {
			width: 500px;
		}
		.wpe-30 {
			width: 30%;
		}
		.mw-70 {
			max-width: 65%;
		}
		.ml-50 {
			margin-left: 50px;
		}
		.right-content {
			display: inline-block;
			vertical-align: top;
			width:45%;
		}
		.left-content {
			display: inline-block;
			vertical-align: top;
			margin-left: 1%;
			width: 45%;
		}
		.checklistTable {
			display: inline-block;
			width: 32.9%;
			margin-bottom: 20px;
			vertical-align: top;
		}
		.picsField {
			margin: 20px 0;
		}
		.picLabel {
			display: inline-block;
			width: 25%;
		}
		.commentValue {
			display: inline-block;
			width: 74%;
			vertical-align: top;
			text-align: justify;
		}
		.icon-section {
			width: 30px;
		}
		h5 {
			font-size: 1em;
		}
		table {
			border-collapse: collapse;
			width: 100%;
			margin: 20px 0px;
		}
		table td, th {
			padding: 10px;
			max-width: 100px;
		}
		table td, table th {
			border: 1px solid #E7E7E8;
		}
		table th, td {
			text-align:center; 
			vertical-align:middle;
		}
		.logo {
			width: 200px;
			margin-bottom: 15px;
			height: 
		}
		.inspeccion {
			color: #3F5B71;
			margin-left: 20px;
			margin-right: 20px;
			font-size: 1.1em;
		}

	</style>
</head>
<body>
	<div style="margin: 10px 0;">
		<!-- <img src="http://d21zid65ggdxzg.cloudfront.net/echeckit-logo.png" alt="logo_belltech" class="logo"> -->
		<img src="http://ddejhenv4m3e3.cloudfront.net/logos/moller.png" alt="logo_moller" class="logo">
		<hr>
		<h2>INFORMACIÓN GENERAL</h2>
		<div class="formHeaders">
			<div class="field ">
				<div class="label wpi-140">Empresa:</div>
				<div class="value wpi-500"><%= checklist.construction.company.name %></div>
			</div>
			<div class="field ">
				<div class="label wpi-140">Obra:</div>
				<div class="value wpi-500"><%= checklist.construction.name %></div>
			</div>
			<div class="field ">
				<div class="label wpi-140">Usuarios involucrados:</div>
				<div class="value wpi-500"><%= checklist.users.order("first_name || ' ' || last_name ASC").map { |u| u.full_name }.join(", ") %></div>
			</div>
			<div class="field ">
				<div class="label wpi-140">Indicador Total:</div>
				<div class="value wpi-500"><%= checklist.total_indicator %></div>
			</div>
		</div>

		<hr>

		<h2>GEOLOCALIZACIÓN</h2>
		<div class="formHeaders">
			<div class="formHeader" style="float: left">
				<img src="<%= checklist.location_image_url %>" style="width: 100%;" />
			</div>
			<div class="formHeader" style="float: right;">
				<div class="field ">
					<div class="label wpi-120">Dirección:</div>
					<br>
					<div class="value"><%= checklist.location.address %></div>
				</div>
				<div class="field">
					<div class="label wpi-120">Comuna:</div>
					<br>
					<div class="value"><%= checklist.location.commune %></div>
				</div>
				<div class="field">
					<div class="label wpi-120">Región:</div>
					<br>
					<div class="value"><%= checklist.location.region %></div>
				</div>
				<div class="field">
					<div class="label wpi-120">Referencia:</div>
					<br>
					<div class="value"><%= checklist.location.reference %></div>
				</div>
			</div>
		</div>
		<br>
		<br>
		<hr>
		<br>
		<h2>CHECKLIST</h2>
		<div class="content">
			<section id="checklist">
				<% checklist.checklist_data.each do |section| %>
					<% if section["items"].inject(0) { |sum, x| if x["value"].present? and x["value"] != 0 then sum + 1 else sum end  } > 0 %>
						<h3><%= section["name"] %></h3>
						<table>
							<tbody>
								<% section["items"].each do |item| %>
									<% if item["value"].present? and item["value"] != 0 %>
										<tr>
											<td>
												<% if item["value"] == 1 %>
													<img class="check" src="http://d21zid65ggdxzg.cloudfront.net/801C65B140A965F51FD49B476D9219F4.png" alt="check_v" />
												<% elsif item["value"] == 2 %>
													<img class="check" src="http://d21zid65ggdxzg.cloudfront.net/768AF9B25098A450CD52CD5B6339D3E8.png" alt="check_x" />
												<% end %>
											</td>
											<td>
												<%= item["name"] %>
											</td>
											<td>
												<% if item["comment"] %>
													<%= simple_format(item["comment"]) %>
												<% else %>
													Sin comentarios
												<% end %>
											</td>
										</tr>
									<% end %>
								<% end %>
							</tbody>
						</table>
					<% end %>
				<% end %>
				<br>
			</section>
		</div>
		<br>
		<br>
	</body>
	</html>